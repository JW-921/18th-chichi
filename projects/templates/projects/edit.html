{% extends "shared/layout.html" %} {% load static %} {% block "content" %}
<div class="min-h-screen bg-white">
  <!-- Hero Section -->
  <div
    class="relative py-16"
    style="background: linear-gradient(to right, #85cacc20, #85cacc40)"
  >
    <div class="container mx-auto px-4">
      <div class="text-center">
        <h1 class="text-4xl font-bold mb-4 text-gray-800">編輯專案</h1>
        <p class="text-xl text-gray-600 mb-8 max-w-2xl mx-auto">
          修改專案內容，完善你的募資計畫
        </p>
      </div>
    </div>
  </div>

  <!-- Form Section -->
  <div class="py-16">
    <div class="container mx-auto px-4">
      <div class="max-w-3xl mx-auto bg-white rounded-lg shadow-md p-8">
        <form
          method="POST"
          action="{% url 'projects:show' project.slug %}"
          class="space-y-6"
          enctype="multipart/form-data"
        >
          {% csrf_token %}

          <!-- 基本資訊 -->
          <div class="space-y-4">
            <h2 class="text-2xl font-semibold text-gray-800 mb-6">基本資訊</h2>

            <div>
              <label
                for="title"
                class="block text-sm font-medium text-gray-700 mb-1"
                >專案標題</label
              >
              <input
                type="text"
                id="title"
                name="title"
                required
                class="input input-bordered w-full"
                value="{{ project.title }}"
              />
            </div>

            <div>
              <label
                for="subtitle"
                class="block text-sm font-medium text-gray-700 mb-1"
                >副標題</label
              >
              <input
                type="text"
                id="subtitle"
                name="subtitle"
                class="input input-bordered w-full"
                value="{{ project.subtitle }}"
              />
            </div>

            <div>
              <label
                for="goal_amount"
                class="block text-sm font-medium text-gray-700 mb-1"
                >目標金額</label
              >
              <input
                type="number"
                id="goal_amount"
                name="goal_amount"
                required
                min="0"
                class="input input-bordered w-full"
                value="{{ project.goal_amount }}"
              />
            </div>

            <div>
              <label
                for="cover_image"
                class="block text-lg font-semibold text-gray-600"
                >個人媒體</label
              >
              <input
                type="file"
                id="cover_image"
                name="cover_image"
                class="mt-1"
              />
            
              <!-- 根據媒體類型動態顯示內容 -->
              <div class="mt-4">
                {% if media_type == "image" %}
                <img
                  src="{{ project.cover_image.url }}"
                  alt="Profile Picture"
                  class="w-40 h-40 rounded-full object-cover"
                />
                {% elif media_type == "video" %}
                <video
                  src="{{ project.cover_image.url }}"
                  controls
                  class="w-40 h-40 rounded-lg object-cover"
                >
                  您的瀏覽器不支援影片播放。
                </video>
                {% else %}
                <p class="text-red-500">不支援的媒體格式。</p>
                {% endif %}
              </div>
            </div>

          <!-- 時間設定 -->
          <div class="space-y-4 pt-6">
            <h2 class="text-2xl font-semibold text-gray-800 mb-6">時間設定</h2>

            <div>
              <label
                for="start_at"
                class="block text-sm font-medium text-gray-700 mb-1"
                >預計開始時間</label
              >
              <input
                type="datetime-local"
                id="start_at"
                name="start_at"
                class="input input-bordered w-full"
                value="{{ format_time_start }}"
              />
            </div>

            <div>
              <label
                for="end_at"
                class="block text-sm font-medium text-gray-700 mb-1"
                >預計結束時間</label
              >
              <input
                type="datetime-local"
                id="end_at"
                name="end_at"
                required
                class="input input-bordered w-full"
                value="{{ format_time_end }}"
              />
            </div>
          </div>

          <!-- 專案內容 -->
          <div class="space-y-4 pt-6">
            <h2 class="text-2xl font-semibold text-gray-800 mb-6">專案內容</h2>

            <div>
              <label
                for="story"
                class="block text-sm font-medium text-gray-700 mb-1"
                >專案說明</label
              >
              <textarea
                id="story"
                name="story"
                rows="6"
                required
                class="textarea textarea-bordered w-full"
              >
{{ project.story }}</textarea
              >
            </div>

            <div>
              <label
                for="location"
                class="block text-sm font-medium text-gray-700 mb-1"
                >專案地點</label
              >
              <input
                type="text"
                id="location"
                name="location"
                class="input input-bordered w-full"
                value="{{ project.location }}"
              />
            </div>
          </div>

          <!-- 按鈕區 -->
          <div class="flex justify-between pt-8">
            <a
              href="{% url 'projects:delete' project.slug %}"
              class="btn btn-error text-white"
            >
              刪除專案
            </a>
            <div class="space-x-4">
              <a
                href="{% url 'projects:show' project.slug %}"
                class="btn"
                style="background-color: #85cacc20; color: #85cacc"
              >
                取消
              </a>
              <button
                type="submit"
                class="btn text-white"
                style="background-color: #85cacc; border: none"
              >
                儲存變更
              </button>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
{% endblock %}
