{% extends "shared/layout.html" %} {% block "content" %}

<div class="container mx-auto px-4 py-8">
  <!-- 狀態條 -->
  <div class="max-w-3xl mx-auto mb-8">
    <div class="flex justify-between items-center">
      <div class="flex flex-col items-center w-20">
        <div
          class="w-10 h-10 bg-purple-600 rounded-full flex items-center justify-center text-white font-bold"
        >
          1
        </div>
        <span class="text-sm mt-2 text-center">選擇金額</span>
      </div>
      <div class="flex-1 h-1 mx-4 bg-gray-300"></div>
      <div class="flex flex-col items-center w-20">
        <div
          class="w-10 h-10 bg-gray-300 rounded-full flex items-center justify-center text-gray-600 font-bold"
        >
          2
        </div>
        <span class="text-sm mt-2 text-center">確認訂單</span>
      </div>
      <div class="flex-1 h-1 mx-4 bg-gray-300"></div>
      <div class="flex flex-col items-center w-20">
        <div
          class="w-10 h-10 bg-gray-300 rounded-full flex items-center justify-center text-gray-600 font-bold"
        >
          3
        </div>
        <span class="text-sm mt-2 text-center">完成付款</span>
      </div>
    </div>
  </div>

  <h1 class="text-4xl font-title font-bold text-center mb-12">自由贊助專案</h1>

  <div
    class="bg-white shadow-md rounded-lg overflow-hidden max-w-[360px] mx-auto"
  >
    <div class="p-6">
      <form
        method="POST"
        action="{% url 'projects:free_sponsor' project.slug %}"
      >
        {% csrf_token %}
        <div class="mb-6">
          <label
            for="amount"
            class="block text-lg font-semibold text-gray-700 mb-2"
            >自由贊助金額：</label
          >
          <div class="flex items-center">
            <span
              class="px-3 py-2 bg-gray-200 border border-gray-300 text-gray-700 rounded-l-lg"
              >NTD</span
            >
            <input
              type="number"
              name="amount"
              id="amount"
              min="1"
              required
              class="w-full px-4 py-2 border-t border-b border-r border-gray-300 rounded-r-lg focus:outline-none focus:ring-2 focus:ring-blue-300 focus:border-blue-500"
              placeholder="請輸入金額"
            />
          </div>
        </div>
        <button
          type="submit"
          class="w-full bg-primary text-white py-2 px-4 rounded-md hover:bg-blue-600 transition duration-300"
        >
          送出贊助
        </button>
      </form>
    </div>
  </div>
</div>

<div class="container mx-auto px-4 py-8">
  <h1 class="text-4xl font-title font-bold text-center mb-12">
    {{ project.title }}
  </h1>

  <div class="grid grid-cols-1 gap-6">
    {% for detail in reward_details %}
    <div
      class="bg-white shadow-md rounded-lg overflow-hidden grid grid-cols-1 md:grid-cols-3"
    >
      <div
        class="p-6 border-b md:border-b-0 md:border-r border-neutral-200 md:col-span-1"
      >
        <form
          method="POST"
          action="{% url 'projects:reward_sponsor' project.slug %}"
        >
          {% csrf_token %}
          <h2 class="text-xl font-semibold mb-4">{{ detail.reward.title }}</h2>
          <p class="text-neutral-500 mb-3">{{ detail.reward.description }}</p>
          <p class="text-lg font-bold mb-3">
            金額：NT${{ detail.reward.price }}
          </p>
          <p class="text-sm text-gray-500">
            預計交貨：{{ detail.reward.estimated_delivery|date:"F Y" }}
          </p>
          <p class="text-neutral-600">剩餘數量：{{ detail.reward.quantity }}</p>
          <input type="hidden" name="reward" value="{{ detail.reward.id }}" />
          <button
            type="submit"
            class="mt-4 w-full bg-primary text-white py-2 px-4 rounded-md hover:bg-blue-600"
          >
            贊助此方案
          </button>
        </form>
      </div>

          <!-- 右側：商品和選項資訊 -->
          <div class="p-8 md:col-span-2 bg-white">
            <div class="space-y-8">
              {% if detail.products %}
              <div>
                <h4 class="text-xl font-bold mb-4 text-gray-800 flex items-center">
                  <i class="fas fa-gift mr-3"></i>包含的商品
                </h4>
                <ul class="space-y-3 pl-6">
                  {% for product in detail.products %}
                  <li class="text-gray-600 flex items-center">
                    <span class="w-2 h-2 bg-gray-400 rounded-full mr-3"></span>
                    {{ product.name }}
                  </li>
                  {% endfor %}
                </ul>
              </div>
              {% endif %}

              {% if detail.options %}
              <div>
                <h4 class="text-xl font-bold mb-4 text-gray-800 flex items-center">
                  <i class="fas fa-plus-circle mr-3"></i>可加購選項
                </h4>
                <ul class="space-y-3 pl-6">
                  {% for option in detail.options %}
                  <li class="text-gray-600 flex items-center justify-between">
                    <div class="flex items-center">
                      <span class="w-2 h-2 bg-gray-400 rounded-full mr-3"></span>
                      {{ option.name }}
                    </div>
                    <span class="font-semibold text-gray-700">NT$ {{ option.price }}</span>
                  </li>
                  {% endfor %}
                </ul>
              </div>
              {% endif %}
            </div>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
</div>
{% endblock %}
